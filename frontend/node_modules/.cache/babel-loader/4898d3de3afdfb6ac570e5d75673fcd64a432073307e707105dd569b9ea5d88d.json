{"ast":null,"code":"var _jsxFileName = \"C:\\\\myProjects\\\\FastAPI KNB\\\\project\\\\websockets-reacify\\\\frontend\\\\src\\\\components\\\\LoginViaVK.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { MDBBtn } from 'mdb-react-ui-kit';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction LoginViaVK() {\n  _s();\n  const [code, setCode] = useState(0);\n  useEffect(_ref => {\n    let [code, setCode] = _ref;\n    const params = new URLSearchParams(window.location.search);\n    setCode(params.get(\"code\"));\n    params.delete(\"code\");\n    if (code) {\n      loginRequest();\n    }\n  });\n  const params = {\n    client_id: 51554511,\n    redirect_uri: \"http://localhost:8000/\",\n    scope: \"email, first_name, last_name\",\n    response_type: \"code\"\n  };\n  const getCode = () => {\n    window.location.href = `https://oauth.vk.com/authorize?client_id=${params.client_id}&redirect_uri=${params.redirect_uri}&scope=${params.scope}&response_type=${params.response_type}`;\n  };\n  const loginRequest = async () => {\n    if (code) {\n      fetch(`VKAuth?code=${code}`, {\n        method: 'GET'\n      }).then(response => response.json()).then(response => {\n        if (response[\"code\"] == 1) {\n          window.location.href = params.redirect_uri;\n        }\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(MDBBtn, {\n      onClick: getCode,\n      className: \"mb-2 fs-5 w-100 py-2\",\n      children: [\"Sign in via \", /*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"VK\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 84\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n}\n_s(LoginViaVK, \"wXQcHX7656qFbI7wf4WdPbS1nJw=\");\n_c = LoginViaVK;\nexport default LoginViaVK;\nvar _c;\n$RefreshReg$(_c, \"LoginViaVK\");","map":{"version":3,"names":["React","useState","useEffect","MDBBtn","jsxDEV","_jsxDEV","Fragment","_Fragment","LoginViaVK","_s","code","setCode","_ref","params","URLSearchParams","window","location","search","get","delete","loginRequest","client_id","redirect_uri","scope","response_type","getCode","href","fetch","method","then","response","json","children","onClick","className","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/myProjects/FastAPI KNB/project/websockets-reacify/frontend/src/components/LoginViaVK.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport {\r\n  MDBBtn,\r\n}\r\nfrom 'mdb-react-ui-kit';\r\n\r\nfunction LoginViaVK() {\r\n\r\n    const [code, setCode] = useState(0)\r\n    \r\n    useEffect(([code, setCode]) => {\r\n        const params = new URLSearchParams(window.location.search)\r\n        setCode(params.get(\"code\"))\r\n        params.delete(\"code\")\r\n        if (code) {\r\n            loginRequest()\r\n        }\r\n    })\r\n\r\n    const params = {\r\n        client_id: 51554511,\r\n        redirect_uri: \"http://localhost:8000/\",\r\n        scope:\"email, first_name, last_name\",\r\n        response_type:\"code\",\r\n    }\r\n\r\n\r\n    const getCode = () => {\r\n        window.location.href = `https://oauth.vk.com/authorize?client_id=${params.client_id}&redirect_uri=${params.redirect_uri}&scope=${params.scope}&response_type=${params.response_type}`; \r\n    }    \r\n\r\n    const loginRequest = async () => {\r\n        if (code) {\r\n            fetch(`VKAuth?code=${code}`, {method: 'GET'})\r\n              .then(response => response.json())\r\n              .then(response => {\r\n                if (response[\"code\"] == 1) {\r\n                    window.location.href = params.redirect_uri\r\n              }\r\n            })\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <MDBBtn onClick={getCode} className='mb-2 fs-5 w-100 py-2'>Sign in via <strong>VK</strong></MDBBtn>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default LoginViaVK;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SACEC,MAAM,QAEH,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAExB,SAASC,UAAUA,CAAA,EAAG;EAAAC,EAAA;EAElB,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGV,QAAQ,CAAC,CAAC,CAAC;EAEnCC,SAAS,CAACU,IAAA,IAAqB;IAAA,IAApB,CAACF,IAAI,EAAEC,OAAO,CAAC,GAAAC,IAAA;IACtB,MAAMC,MAAM,GAAG,IAAIC,eAAe,CAACC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC;IAC1DN,OAAO,CAACE,MAAM,CAACK,GAAG,CAAC,MAAM,CAAC,CAAC;IAC3BL,MAAM,CAACM,MAAM,CAAC,MAAM,CAAC;IACrB,IAAIT,IAAI,EAAE;MACNU,YAAY,EAAE;IAClB;EACJ,CAAC,CAAC;EAEF,MAAMP,MAAM,GAAG;IACXQ,SAAS,EAAE,QAAQ;IACnBC,YAAY,EAAE,wBAAwB;IACtCC,KAAK,EAAC,8BAA8B;IACpCC,aAAa,EAAC;EAClB,CAAC;EAGD,MAAMC,OAAO,GAAGA,CAAA,KAAM;IAClBV,MAAM,CAACC,QAAQ,CAACU,IAAI,GAAI,4CAA2Cb,MAAM,CAACQ,SAAU,iBAAgBR,MAAM,CAACS,YAAa,UAAST,MAAM,CAACU,KAAM,kBAAiBV,MAAM,CAACW,aAAc,EAAC;EACzL,CAAC;EAED,MAAMJ,YAAY,GAAG,MAAAA,CAAA,KAAY;IAC7B,IAAIV,IAAI,EAAE;MACNiB,KAAK,CAAE,eAAcjB,IAAK,EAAC,EAAE;QAACkB,MAAM,EAAE;MAAK,CAAC,CAAC,CAC1CC,IAAI,CAACC,QAAQ,IAAIA,QAAQ,CAACC,IAAI,EAAE,CAAC,CACjCF,IAAI,CAACC,QAAQ,IAAI;QAChB,IAAIA,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE;UACvBf,MAAM,CAACC,QAAQ,CAACU,IAAI,GAAGb,MAAM,CAACS,YAAY;QAChD;MACF,CAAC,CAAC;IACN;EACJ,CAAC;EAED,oBACIjB,OAAA,CAAAE,SAAA;IAAAyB,QAAA,eACI3B,OAAA,CAACF,MAAM;MAAC8B,OAAO,EAAER,OAAQ;MAACS,SAAS,EAAC,sBAAsB;MAAAF,QAAA,GAAC,cAAY,eAAA3B,OAAA;QAAA2B,QAAA,EAAQ;MAAE;QAAAG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QAAS;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAS,iBACpG;AAEX;AAAC7B,EAAA,CA1CQD,UAAU;AAAA+B,EAAA,GAAV/B,UAAU;AA4CnB,eAAeA,UAAU;AAAC,IAAA+B,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}